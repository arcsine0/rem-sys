/*!
 * Start Bootstrap - SB Admin 2 v4.1.3 (https://startbootstrap.com/theme/sb-admin-2)
 * Copyright 2013-2022 Start Bootstrap
 * Licensed under MIT (https://github.com/StartBootstrap/startbootstrap-sb-admin-2/blob/master/LICENSE)
 */

$(document).ready(()=>{var s=localStorage.getItem("username");function e(){$.ajax({url:"http://localhost:4000/user/announcements/",method:"GET",crossDomain:!0,xhrFields:{withCredentials:!1},success:e=>{e&&e.forEach((e,s)=>{e=`
                                        <tr id="row${s}">
                                            <th scope="row" class="ann_check">
                                                <input id="c_${e.id}" type="checkbox" class="checkbox" value="">
                                            </th>
                                            <td>${e.poster}</td>
                                            <td class="row">
                                                <div class="col-12">
                                                    <strong>${e.title}</strong>
                                                </div>
                                                <div class="col-12">
                                                    ${e.body}
                                                </div>
                                            </td>
                                        </tr>
                                        `;$("#table_data").append(e)})},error:e=>{console.log(e)}})}function o(){$("#table_data").empty(),e()}e(),$("#del-ann").on("click",()=>{var e=$("#table_data").children("tr"),a=[];e.each((e,s)=>{s=$(s).find(".checkbox");!0===s.is(":checked")&&(s=s.attr("id").split("_")[1],a.push({name:"id",value:s}))}),console.log(a),$.ajax({url:"http://localhost:4000/user/announcements",type:"DELETE",data:a,crossDomain:!0,xhrFields:{withCredentials:!1},success:e=>{e&&"success"==e&&(console.log("saved"),o())},error:e=>{console.log(e)}})}),$("#add-ann").on("click",()=>{$("#addAnnounce").modal("show")}),$("#save-add").on("click",()=>{var e=$("#ann-form").serializeArray();e.push({name:"name",value:s}),console.log(e),$.ajax({url:"http://localhost:4000/user/announcements",type:"POST",data:e,crossDomain:!0,xhrFields:{withCredentials:!1},success:e=>{e&&"success"==e&&(console.log("saved"),o())},error:e=>{console.log(e)}})})});