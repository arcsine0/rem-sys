/*!
 * Start Bootstrap - SB Admin 2 v4.1.3 (https://startbootstrap.com/theme/sb-admin-2)
 * Copyright 2013-2022 Start Bootstrap
 * Licensed under MIT (https://github.com/StartBootstrap/startbootstrap-sb-admin-2/blob/master/LICENSE)
 */

$(document).ready(()=>{function e(){localStorage.getItem("id");$.ajax({url:"http://localhost:4000/user/validate/payments",method:"GET",crossDomain:!0,xhrFields:{withCredentials:!1},success:t=>{t&&t.forEach((t,a)=>{t=`
                                        <tr>
                                            <td>${t.id}</td>
                                            <td>${t.buyer}</td>
                                            <td>${t.name}</td>
                                            <td>${t.reference}</td>
                                            <td>${t.mode}</td>
                                            <td>${t.due}</td>
                                            <td>${t.amount}</td>
                                            <td>
                                                File preview?
                                            </td>
                                            <td>
                                                <button id="approved_${t.id}" class="btn btn-success btn-circle btn-sm validate">
                                                    <i class="fas fa-check"></i>
                                                </button>
                                                <button id="rejected_${t.id}" class="btn btn-danger btn-circle btn-sm validate">
                                                    <i class="fas fa-xmark"></i>
                                                </button>
                                                <a href="#" class="btn btn-primary btn-circle btn-sm">
                                                    <i class="fas fa-envelope"></i>
                                                </a>
                                            </td>
                                        </tr>
                                        `;$("#table_data").append(t)})},error:t=>{console.log(t)}})}e(),$("#table_data").on("click",".validate",t=>{console.log($(t.target).attr("id"));var a=$(t.target).attr("id").split("_"),t=a[1];null!=t&&(a=[{name:"id",value:t},{name:"status",value:a[0]}],$.ajax({url:"http://localhost:4000/user/validate/payments",type:"POST",data:a,crossDomain:!0,xhrFields:{withCredentials:!1},success:t=>{t&&"success"==t&&(console.log("saved"),$("#table_data").empty(),e())},error:t=>{console.log(t)}}))})});