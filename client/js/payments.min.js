/*!
 * Start Bootstrap - SB Admin 2 v4.1.3 (https://startbootstrap.com/theme/sb-admin-2)
 * Copyright 2013-2022 Start Bootstrap
 * Licensed under MIT (https://github.com/StartBootstrap/startbootstrap-sb-admin-2/blob/master/LICENSE)
 */

$(document).ready(()=>{function t(){var t=localStorage.getItem("id");$.ajax({url:`http://localhost:4000/user/payments/${t}`,method:"GET",crossDomain:!0,xhrFields:{withCredentials:!1},success:t=>{t&&t.forEach((t,e)=>{var a=t.due.split(/[- :]/);console.log(a);a=new Date(...a),t=`
                                        <tr>
                                            <td>${t.name}</td>
                                            <td>${t.address}</td>
                                            <td>${a}</td>
                                            <td>P${t.amount}</td>
                                            <td>
                                                <a>
                                                    <button type="button" data-id="pay_${t.id}" class="btn btn-primary pay">Pay Now</button>
                                                </a> 
                                                <a href="./property-info.html" >
                                                    <button type="button" data-id="p_${t.id}" class="btn btn-info">View Property</button>
                                                </a> 
                                            </td>
                                        </tr>
                                        `;$("#table_data").append(t)})},error:t=>{console.log(t)}})}t(),$("#table_data").on("click",".pay",t=>{var e=$(t.target).data("id").split("_")[1];$.ajax({url:`http://localhost:4000/user/propertyinfo/${e}`,method:"GET",crossDomain:!0,xhrFields:{withCredentials:!1},success:t=>{t&&(window.localStorage.setItem("propertyName",t[0].name),window.localStorage.setItem("propertyAddress",t[0].address),window.localStorage.setItem("propertyDue",t[0].due),window.localStorage.setItem("propertyAmount",t[0].amount),window.localStorage.setItem("paymentID",e),window.location.href="./make-payment.html")},error:t=>{console.log(t)}})})});